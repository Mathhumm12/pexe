const questions = [
    {
        question: "O que define a Idade MÃ©dia?",
        options: [
            "Um perÃ­odo histÃ³rico do sÃ©culo V ao sÃ©culo XV.",
            "A RevoluÃ§Ã£o Industrial.",
            "O Renascimento.",
            "A era dos descobrimentos."
        ],
        answer: 0
    },
    {
        question: "Qual evento Ã© considerado o marco inicial da Idade MÃ©dia?",
        options: [
            "A descoberta da AmÃ©rica.",
            "A construÃ§Ã£o da Grande Muralha da China.",
            "A queda do ImpÃ©rio Romano do Ocidente.",
            "A RevoluÃ§Ã£o Francesa."
        ],
        answer: 2
    },
    {
        question: "O que foi o feudalismo?",
        options: [
            "Uma escola de pensamento.",
            "Uma forma de governo.",
            "Um sistema social e econÃ´mico.",
            "Uma religiÃ£o."
        ],
        answer: 2
    },
    {
        question: "Quem foi Carlos Magno?",
        options: [
            "Um famoso artista.",
            "Um filÃ³sofo grego.",
            "Rei dos Francos que unificou a Europa.",
            "Um imperador romano."
        ],
        answer: 2
    },
    {
        question: "O que eram as Cruzadas?",
        options: [
            "Viagens comerciais.",
            "Eventos culturais.",
            "ExpediÃ§Ãµes militares para a Terra Santa.",
            "Descobrimentos de novas terras."
        ],
        answer: 2
    },
    {
        question: "Quem foi o responsÃ¡vel pela criaÃ§Ã£o da InquisiÃ§Ã£o?",
        options: [
            "O Papa.",
            "Carlos Magno.",
            "O Imperador Romano.",
            "Os vikings."
        ],
        answer: 0
    },
    {
        question: "Qual era a principal religiÃ£o da Idade MÃ©dia?",
        options: [
            "O JudaÃ­smo.",
            "O Cristianismo.",
            "O Islamismo.",
            "O Budismo."
        ],
        answer: 1
    },
    {
        question: "Qual dos seguintes castelos Ã© famoso na Idade MÃ©dia?",
        options: [
            "Castelo de Windsor.",
            "Castelo de Neuschwanstein.",
            "Castelo de Dracula.",
            "Castelo de Hogwarts."
        ],
        answer: 0
    },
    {
        question: "O que eram as guildas?",
        options: [
            "OrganizaÃ§Ãµes de comerciantes e artesÃ£os.",
            "ReuniÃµes de nobres.",
            "Escolas de filosofia.",
            "ExÃ©rcitos medievais."
        ],
        answer: 0
    },
    {
        question: "O que era o suserano?",
        options: [
            "Um agricultor.",
            "Um nobre que protegia vassalos.",
            "Um tipo de mercador.",
            "Um cavaleiro."
        ],
        answer: 1
    },
    {
        question: "Qual foi a importÃ¢ncia da Peste Negra?",
        options: [
            "Aumento populacional.",
            "DiminuiÃ§Ã£o da populaÃ§Ã£o e mudanÃ§as sociais.",
            "Fim da Idade MÃ©dia.",
            "InÃ­cio das Cruzadas."
        ],
        answer: 1
    },
    {
        question: "Quem eram os monges?",
        options: [
            "LÃ­deres militares.",
            "Pessoas que dedicavam suas vidas Ã  religiÃ£o.",
            "Artistas.",
            "Nobres."
        ],
        answer: 1
    },
    {
        question: "Qual foi uma das principais universidades da Idade MÃ©dia?",
        options: [
            "Universidade de Oxford.",
            "Universidade de Harvard.",
            "Universidade de Yale.",
            "Universidade de Stanford."
        ],
        answer: 0
    },
    {
        question: "Qual foi um importante livro da Idade MÃ©dia?",
        options: [
            "O PrÃ­ncipe de Maquiavel.",
            "A Divina ComÃ©dia de Dante.",
            "Dom Quixote.",
            "Os LusÃ­adas."
        ],
        answer: 1
    },
    {
        question: "O que era a vassalagem?",
        options: [
            "Uma forma de governo.",
            "Um sistema de proteÃ§Ã£o entre senhores e vassalos.",
            "Uma religiÃ£o.",
            "Uma prÃ¡tica comercial."
        ],
        answer: 1
    },
    {
        question: "Quem era JoÃ£o Sem Terra?",
        options: [
            "Um rei que assinou a Magna Carta.",
            "Um famoso artista.",
            "Um filÃ³sofo grego.",
            "Um lÃ­der militar."
        ],
        answer: 0
    },
    {
        question: "Qual foi a funÃ§Ã£o das catedrais na Idade MÃ©dia?",
        options: [
            "Escolas.",
            "Centros administrativos.",
            "Igrejas e centros de comunidade.",
            "Mercados."
        ],
        answer: 2
    },
    {
        question: "O que eram os trovadores?",
        options: [
            "Artistas que compunham mÃºsicas e poemas.",
            "Guerreiros.",
            "Cientistas.",
            "Monges."
        ],
        answer: 0
    },
    {
        question: "Qual a importÃ¢ncia da Idade MÃ©dia para a histÃ³ria?",
        options: [
            "Foi um perÃ­odo de estagnaÃ§Ã£o.",
            "Foi crucial para a formaÃ§Ã£o da Europa moderna.",
            "NÃ£o teve importÃ¢ncia.",
            "Foi a Ã©poca do Renascimento."
        ],
        answer: 1
    }
];

let currentQuestionIndex = 0;
let score = 0;

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function loadQuestion() {
    const questionElement = document.getElementById("question");
    const optionsElement = document.getElementById("options");
    const nextButton = document.getElementById("next-button");
    const resultElement = document.getElementById("result");

    const currentQuestion = questions[currentQuestionIndex];
    questionElement.textContent = currentQuestion.question;

    // Embaralhar as opÃ§Ãµes
    const shuffledOptions = [...currentQuestion.options];
    shuffleArray(shuffledOptions);

    // Manter o Ã­ndice da resposta correta
    const correctAnswerIndex = currentQuestion.options.indexOf(currentQuestion.options[currentQuestion.answer]);

    optionsElement.innerHTML = '';
    shuffledOptions.forEach((option) => {
        const button = document.createElement("button");
        button.textContent = option;
        button.classList.add("option");
        button.onclick = () => checkAnswer(option, currentQuestion, shuffledOptions, correctAnswerIndex);
        optionsElement.appendChild(button);
    });

    nextButton.classList.add("hidden");
    resultElement.textContent = '';
}

function checkAnswer(selectedOption, currentQuestion, shuffledOptions, correctAnswerIndex) {
    const resultElement = document.getElementById("result");
    const nextButton = document.getElementById("next-button");
    const options = document.querySelectorAll(".option");
    const scoreDisplay = document.getElementById("score");

    options.forEach((button, index) => {
        if (shuffledOptions[index] === currentQuestion.options[currentQuestion.answer]) {
            button.classList.add("correct");
        } else {
            button.classList.add("incorrect");
        }
    });

    if (selectedOption === currentQuestion.options[currentQuestion.answer]) {
        resultElement.textContent = "VocÃª acertou! ğŸ";
        score++; // Incrementa a pontuaÃ§Ã£o apenas se a resposta estiver correta
    } else {
        resultElement.textContent = "VocÃª errou! ğŸ’©";
    }

    // Atualizar a pontuaÃ§Ã£o exibida
    scoreDisplay.textContent = score;

    // Mostrar botÃ£o de prÃ³xima pergunta apenas se nÃ£o for a Ãºltima pergunta
    if (currentQuestionIndex < questions.length - 1) {
        nextButton.classList.remove("hidden");
    } else {
        nextButton.textContent = "Ver Resultados";
        nextButton.classList.remove("hidden");
    }
}

document.getElementById("next-button").onclick = () => {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        loadQuestion();
    } else {
        showFinalResult();
    }
};

// Exibir o resultado final
function showFinalResult() {
    const finalScore = score; // Cada resposta correta vale 1 ponto
    document.getElementById("result").textContent = `VocÃª terminou o jogo! Sua pontuaÃ§Ã£o: ${finalScore}`;
}

// Carregar a primeira pergunta
loadQuestion();
